const express=require("express"),bodyParser=require("body-parser"),exphbs=require("express-handlebars"),path=require("path"),nodemailer=require("nodemailer"),cookieParser=require("cookie-parser"),proxy=require("http-proxy-middleware");function HandlePostRequest(){var app=express();app.engine("handlebars",exphbs()),app.set("view engine","handlebars"),app.use("/public",express.static(path.join(__dirname,"public"))),app.use(bodyParser.urlencoded({extended:!1})),app.use(bodyParser.json()),app.use(cookieParser()),app.get("/",(req,res)=>{res.render("contact me!")}),app.post("/api/sendMail",(req,res)=>{console.log(req.body);const output=`\n        <p>You have a new contact request</p>\n        <h3>Contact Details</h3>\n        <ul>\n        <li>Name: ${req.body.name}</li>\n        <li>Company: ${req.body.company}</li>\n        <li>Email: ${req.body.email}</li>\n        <li>Phone: ${req.body.phone}</li>\n        </ul>\n        <h3>Message:</h3>\n        <p>${req.body.message}</p>\n    `;var account={myEmail:"dummytestfucyou@gmail.com",password:"123456789#!"};let transporter=nodemailer.createTransport({service:"Gmail",auth:{user:account.myEmail,pass:account.password},tls:{rejectUnauthorized:!1}}),mailOptions={from:account.myEmail,to:"leo1997.work@gmail.com",subject:"Node Contact Request",text:"Hello world",html:output};transporter.sendMail(mailOptions,(error,info)=>{if(error)return console.log(error);console.log("Message sent: %s",info.messageId),console.log("Preview URL: %s",nodemailer.getTestMessageUrl(info)),res.render("contact",{msg:"Email has been sent"})})});var server=app.listen(3e3,()=>{var host=server.address().address,port=server.address().port;console.log("app listening at http://%s:%s",host,port)})}function Main(){HandlePostRequest()}Main();